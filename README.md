# QA Autotests

Проект с автотестами на Python и pytest, развиваемый по поэтапному плану обучения QA Automation.
Репозиторий отражает прогресс по месяцам (январь, февраль и далее).

## Используемые технологии

- Python (версия фиксируется через pyenv)
- Poetry — управление зависимостями и виртуальным окружением
- pytest — фреймворк для автотестов

## Требования

- macOS / Linux
- pyenv
- Poetry

## Подготовка окружения

### 1. Установить нужную версию Python через pyenv

Версия Python фиксируется в файле `.python-version`.

Если версия ещё не установлена:

```bash
pyenv install $(cat .python-version)
```

При входе в папку проекта pyenv автоматически переключит Python.

### 2. Установить зависимости через Poetry

```bash
poetry install
```

Poetry создаст виртуальное окружение в папке `.venv/`.

## Запуск тестов

Все тесты запускаются **одной командой** из корня проекта:

```bash
poetry run pytest
```

## Структура проекта

```text
src/app/              — исходный код (утилиты и логика)
tests/
  ├─ conftest.py      — общие фикстуры проекта
  ├─ unit/
  │   ├─ conftest.py  — unit-специфичные фикстуры
  │   ├─ test_*.py    — unit-тесты
pytest.ini            — конфигурация pytest
pyproject.toml        — описание проекта и зависимостей (Poetry)
poetry.lock           — зафиксированные версии зависимостей
FIXTURES.md           — описание всех фикстур и их назначения
```

## API tests (March)

В проект добавлен набор API-тестов на базе публичного стенда JSONPlaceholder.

### Base URL
- `https://jsonplaceholder.typicode.com`

### Эндпоинты, покрытые тестами

#### Posts
- `GET /posts` — список постов (проверка, что ответ — список, и структура элементов корректна)
- `GET /posts/{id}` — получение поста по id (позитивные сценарии, проверка полей и типов)
- `POST /posts` — создание поста (проверка 201 и отражение отправленного payload)
- `PUT /posts/{id}` — обновление поста целиком (проверка 200 и отражение payload)
- `PATCH /posts/{id}` — частичное обновление (проверка 200 и изменение поля)
- `DELETE /posts/{id}` — удаление (проверка успешного кода)

#### Comments
- `GET /posts/{id}/comments` — комментарии конкретного поста (ответ — список, проверка структуры и связи postId)

### Негативные сценарии
- неверные эндпоинты (например `/post`, `/postsx`) → ожидаемый `404`

### Риски/ограничения стенда (важно для интерпретации результатов)
- JSONPlaceholder является “fake API”: операции `POST/PUT/PATCH/DELETE` не гарантируют реального сохранения/изменения данных на сервере, поэтому тесты проверяют корректность ответа и контракт, а не фактическое сохранение данных на сервере.


## Особенности проекта

- Используется `src`-layout для изоляции кода проекта
- Применяются фикстуры разных уровней:
  - function
  - module
  - session
- Используются вложенные фикстуры (nested fixtures)
- Применяется параметризация тестов
- Используется динамический выбор фикстур через `request.getfixturevalue`
- Все фикстуры задокументированы в `FIXTURES.md`

## Прогресс по месяцам

- **Январь**
  - базовый pytest
  - структура проекта
  - 20+ unit-тестов
  - README
  - pyenv + Poetry

- **Февраль**
  - conftest.py на нескольких уровнях
  - scopes фикстур
  - nested fixtures
  - параметризация
  - документ FIXTURES.md

- **Март**
  - основы HTTP и REST как объекта тестирования
  - API-тесты на `requests` (23+ прогонов)
  - слой `ApiClient` для переиспользования логики запросов
  - валидация ответов (status code, Content-Type, структура JSON)
  - позитивные и негативные сценарии (включая 404 на неверные эндпоинты)
  - документация эндпоинтов и рисков (fake API JSONPlaceholder)

Состояние проекта по месяцам зафиксировано git-тегами:
- `2026-01`
- `2026-02`
- `2026-03`

## Примечания

- Папки `.venv/`, `__pycache__/` и служебные кеши не коммитятся
- Проект предназначен для обучения и демонстрации навыков QA Automation
